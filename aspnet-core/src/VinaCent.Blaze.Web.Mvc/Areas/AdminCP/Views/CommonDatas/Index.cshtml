@inject IVelzonThemeOptions ThemeOptions
@using Abp.Json
@using VinaCent.Blaze.AppCore.CommonDatas.Dto
@using VinaCent.Blaze.Web.Areas.AdminCP.Common
@using VinaCent.Blaze.Web.Themes.Velzon.ThemeOptions
@{
    ThemeOptions.AddBreadcrumb(L(LKConstants.AdminCP)).AddBreadcrumb(L(LKConstants.CommonDataManagement)).Commit(this);
    ViewBag.Title = L(LKConstants.CommonDataManagement);
    ViewBag.CurrentPageName = AdminCpPageNames.CommonDataManagement;

    var commonRef = new
    {
        ServiceName = "commonData",
        TableAction = "getAll",
        CreateAction = "create",
        UpdateAction = "update",
        DeleteAction = "delete",
        OnModalCreateShow = "",
        OnModalCreateHide = "",
        OnModalUpdateShow = "",
        OnModalUpdateHide = "",
        UpdateHtmlInnerAction = Url.Action("EditModal", "CommonDatas", new { Area = "AdminCP" })?.TrimStart('/')
    }.ToJsonString(true);
}
@section scripts {
    <script src="~/Common/vinacent.db.js" asp-append-version="true"></script>
    <script src="~/view-resources/Views/CommonDatas/Index.js" asp-append-version="true"></script>
}

<section app-main-section="@commonRef">
    <div class="card">
        <div class="card-header">
            <div class="row">
                <div class="col-md-6">
                    <button type="button" class="btn btn-success waves-effect waves-light mb-3 mb-lg-0 create-btn">
                        <i class="fa fa-plus-square"></i> @L(LKConstants.Create)
                    </button>
                </div>
                <div class="col-md-6">
                    @await Html.PartialAsync("~/Areas/AdminCP/Views/CommonDatas/Index.AdvancedSearch.cshtml", new PagedCommonDataResultRequestDto())
                </div>
            </div>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-striped table-bordered main-table" id="common-data-table">
                    <thead>
                        <tr>
                            <th data-ref="@nameof(CommonDataDto.Key).ToCamelCase()">@L(LKConstants.Key)</th>
                            <th data-ref="@nameof(CommonDataDto.ParentKey).ToCamelCase()">@L(LKConstants.ParentKey)</th>
                            <th data-ref="@nameof(CommonDataDto.Value).ToCamelCase()" class="text-start">@L(LKConstants.Value)</th>
                            <th data-ref="@nameof(CommonDataDto.Type).ToCamelCase()" class="text-start">@L(LKConstants.Type)</th>
                            <th data-ref="@nameof(CommonDataDto.Description).ToCamelCase()" class="text-start" style="width: 20rem">@L(LKConstants.Description)</th>
                            <th data-action="RenderAction" data-primary="@nameof(CommonDataDto.Id).ToCamelCase()" data-name="@nameof(CommonDataDto.Value).ToCamelCase()" style="width: 8rem">@L(LKConstants.Actions)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    @await Html.PartialAsync("~/Areas/AdminCP/Views/CommonDatas/_CreateModal.cshtml", new CreateCommonDataDto())

    <div class="modal fade update-modal" tabindex="-1" role="dialog" data-backdrop="static" id="useful-empty-modal">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
            </div>
        </div>
    </div>
</section>