@using System.Globalization
@using Abp.AspNetCore.Mvc.Caching
@using Abp.CachedUniqueKeys
@inject VinaCent.Blaze.Timing.AppTimes AppTimes
@inject ICachedUniqueKeyPerUser CachedUniqueKeyPerUser
@inject IGetScriptsResponsePerUserConfiguration GetScriptsResponsePerUserConfiguration
@inject IConfiguration Configuration

<script src="~/Common/LKConstants.js"></script>

@*core scripts start*@
<script src="~/libs/jquery/jquery.js" asp-append-version="true"></script>
@*core scripts end*@

<script type="text/javascript" src="~/libs/DataTables/DataTables-1.12.1/js/jquery.dataTables.min.js"></script>

<script src="~/view-resources/Views/_Bundles/helpers.min.js" asp-append-version="true"></script>
<script src="~/view-resources/Views/_Bundles/datatables.ajax.min.js" asp-append-version="true"></script>

<script type="text/javascript" src="~/libs/DataTables/DataTables-1.12.1/js/dataTables.bootstrap5.min.js"></script>
<script type="text/javascript" src="~/libs/DataTables/Buttons-2.2.3/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="~/libs/DataTables/Buttons-2.2.3/js/buttons.bootstrap5.min.js"></script>
<script type="text/javascript" src="~/libs/DataTables/Responsive-2.3.0/js/dataTables.responsive.min.js"></script>
<script type="text/javascript" src="~/libs/DataTables/Responsive-2.3.0/js/responsive.bootstrap5.js"></script>

@*abp scripts start*@
<script src="~/libs/block-ui/jquery.blockUI.js" asp-append-version="true"></script>
<script src="~/libs/spin/spin.js" asp-append-version="true"></script>
<script src="~/libs-ext/spin/jquery.spin.js" asp-append-version="true"></script>
<script src="~/libs/sweetalert/sweetalert.min.js" asp-append-version="true"></script>
<script src="~/libs/toastr/toastr.min.js" asp-append-version="true"></script>
<script src="~/libs/moment/moment-with-locales.js" asp-append-version="true"></script>
<script src="~/libs/signalr/dist/browser/signalr.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/abp.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.jquery.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.toastr.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.blockUI.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.spin.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.sweet-alert.js" asp-append-version="true"></script>
<script src="~/libs/abp-web-resources/Abp/Framework/scripts/libs/abp.signalr-client.js" asp-append-version="true"></script>
@*abp scripts end*@

@*other scripts start*@
<script src="~/libs/jquery-validate/jquery.validate.js" asp-append-version="true"></script>
<script src="~/libs/jquery-validate/jquery.validate.unobtrusive.js" asp-append-version="true"></script>
<script src="~/libs/push.js/push.js" asp-append-version="true"></script>
@*other scripts end*@

<script type="text/javascript">
    // This is used to get the application's root path from javascript.
    // It's useful if you're running application in a virtual directory under IIS.
    var abp = abp || {};
    abp.appPath = '@ApplicationPath';
    var vinacent = vinacent || {};
</script>

<environment names="Development">
    <script type="text/javascript">
        vinacent.fileServer = '@(Configuration.GetValue<string>("FileServer"))';
    </script>
</environment>

@*<environment names="Staging,Production">
    <script src="~/view-resources/Views/_Bundles/shared-layout.min.js" asp-append-version="true"></script>
    <script type="text/javascript">
    // This is used to get the application's root path from javascript.
    // It's useful if you're running application in a virtual directory under IIS.
    var abp = abp || {};
    abp.appPath = '@ApplicationPath';
    </script>
    </environment>*@

@if (CultureInfo.CurrentUICulture.TwoLetterISOLanguageName != "en")
{
    var normalizedCurrentUiCultureName = CultureInfo.CurrentUICulture.TwoLetterISOLanguageName;

    var sameables = new[] {"bn", "es", "hy", "pt", "sr", "zh"};
    if (sameables.Contains(normalizedCurrentUiCultureName, StringComparer.OrdinalIgnoreCase))
    {
        normalizedCurrentUiCultureName = CultureInfo.CurrentUICulture.Name.Replace("-", "_");
    }

    var localizationFileNameWithExtension = "messages_";
    localizationFileNameWithExtension += normalizedCurrentUiCultureName switch
    {
        "zh_Hans" => "zh",
        "es_MX" => "es",
        _ => normalizedCurrentUiCultureName
        };
    localizationFileNameWithExtension += ".min.js";
    <script src="~/libs/jquery-validate/localization/@localizationFileNameWithExtension" asp-append-version="true"></script>
}

<script type="text/javascript">
    // Localizing momentjs
    moment.locale('@CultureInfo.CurrentUICulture.Name');
</script>

<!-- Dynamic scripts of ABP system (They are created on runtime and can not be bundled) -->
<script src="~/AbpServiceProxies/GetAll?v=@(AppTimes.StartupTime.Ticks)" type="text/javascript"></script>

@if (GetScriptsResponsePerUserConfiguration.IsEnabled)
{
    <script src="@(ApplicationPath)AbpScripts/GetScripts?v=@(await CachedUniqueKeyPerUser.GetKeyAsync(GetScriptsResponsePerUserCache.CacheName))" type="text/javascript"></script>
}
else
{
    <script src="@(ApplicationPath)AbpScripts/GetScripts?v=@(AppTimes.StartupTime.Ticks)" type="text/javascript"></script>
}

@*custom scripts start*@
<script src="~/js/abp.dataTable.js" asp-append-version="true"></script>
<script src="~/js/main.js" asp-append-version="true"></script>
@*custom scripts end*@